<div class="wikidoc"><h1>&#39;this&#39; Typing</h1>
What if we allowed &#39;this&#39; to also act as a type to reflect the current type of this.  <br /><div style="color:Black;background-color:White;"><pre>
<span style="color:Blue;">class</span> C {
  f() {
    <span style="color:Blue;">var</span> x: <span style="color:Blue;">this</span>; 
    <span style="color:Blue;">var</span> c: C;
    c = x;
  }
}
</pre></div><br />In short, we would enforce:<br /><br />this &lt;: C<br /><br />Which would make the above:<br /><div style="color:Black;background-color:White;"><pre>
<span style="color:Blue;">class</span> C&lt;<span style="color:Blue;">this</span> <span style="color:Blue;">extends</span> C&gt; {
  f() {
    <span style="color:Blue;">var</span> x: <span style="color:Blue;">this</span>; 
    <span style="color:Blue;">var</span> c: C;
    c = x;
  }
}
</pre></div><br />The subtype relationship would also disallow &#39;this&#39; to be interchanged with the class type.  This example would not be allowed:<br /><div style="color:Black;background-color:White;"><pre>
<span style="color:Blue;">class</span> C&lt;<span style="color:Blue;">this</span> <span style="color:Blue;">extends</span> C&gt; {
  f() {
    <span style="color:Blue;">var</span> x = <span style="color:Blue;">this</span>;
    x = <span style="color:Blue;">new</span> C(); 
  }
}
</pre></div>because C is not assignment compatible with x, because x : this.<br /></div><div class="ClearBoth"></div>