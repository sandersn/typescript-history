[
  {
    "Id": "1118991",
    "ThreadId": "466325",
    "Html": "Hi,\r<br />\n<br />\nby executing the following TypeScript-Code, I get the error &quot;TypeError: Environment is null&quot; in FireFox and an equivalent error in IE. The code compiles in VS2012 without errors.\r<br />\n<br />\n///&lt;reference path='....\\TypeScriptSourceCode\\src\\Services\\es5compat.ts' /&gt;\r<br />\n///&lt;reference path='....\\TypeScriptSourceCode\\src\\compiler\\syntax\\references.ts' /&gt;\r<br />\n///&lt;reference path='....\\TypeScriptSourceCode\\src\\compiler\\syntax\\emitter.ts' /&gt;\r<br />\n///&lt;reference path='....\\TypeScriptSourceCode\\src\\compiler\\syntax\\prettyPrinter.ts' /&gt;\r<br />\n///&lt;reference path='....\\TypeScriptSourceCode\\src\\compiler\\core\\environment.ts' /&gt;\r<br />\n///&lt;reference path='....\\TypeScriptSourceCode\\src\\harness\\diff.ts' /&gt;\r<br />\n///&lt;reference path='....\\TypeScriptSourceCode\\src\\compiler\\syntaxTreeToAstVisitor.ts' /&gt;<br />\n<pre><code>    var fileName = &quot;./sut.ts&quot;;\n    var contents = Environment.readFile(fileName, /*codepage*/ null).contents;\n    var text = TypeScript.TextFactory.createText(contents);\n    var tree = TypeScript.Parser.parse(fileName, text, TypeScript.isDTSFile(fileName), new TypeScript.ParseOptions(TypeScript.LanguageVersion.EcmaScript5, true, false));\n    var ast = TypeScript.SyntaxTreeToAstVisitor.visit(tree, fileName, new TypeScript.CompilationSettings(), /*incrementalAST:*/ true);\n    console.log(ast.docComments()[0]);\n</code></pre>\n\nI copied (almost) all of the references and the code from the tests in the TypeScript source code (&lt;TypeScriptSourceCode&gt;\\tests\\Fidelity\\program.ts). My HTML-Website looks like this:\r<br />\n&lt;!DOCTYPE html&gt;\r<br />\n&lt;html&gt;<br />\n<pre><code>&lt;head&gt;&lt;title&gt;TypeScript AST Accessor Test&lt;/title&gt;&lt;/head&gt;\n&lt;body&gt;\n  &lt;script src=&quot;../../TypeScriptSourceCode/src/Services/es5compat.js&quot;&gt;&lt;/script&gt;\n  &lt;script src=&quot;../../TypeScriptSourceCode/src\\compiler/syntax/references.js&quot;&gt;&lt;/script&gt;\n  &lt;script src=&quot;../../TypeScriptSourceCode/src/compiler/syntax/emitter.js&quot;&gt;&lt;/script&gt;\n  &lt;script src=&quot;../../TypeScriptSourceCode/src/compiler/syntax/prettyPrinter.js&quot;&gt;&lt;/script&gt;\n  &lt;script src=&quot;../../TypeScriptSourceCode/src/compiler/core/environment.js&quot;&gt;&lt;/script&gt;\n  &lt;script src=&quot;../../TypeScriptSourceCode/src/harness/diff.js&quot;&gt;&lt;/script&gt;\n  &lt;script src=&quot;../../TypeScriptSourceCode/src/compiler/syntaxTreeToAstVisitor.js&quot;&gt;&lt;/script&gt;\n &lt;script src=&quot;ASTAccessorTests.js&quot;&gt;&lt;/script&gt;\n&lt;/body&gt;</code></pre>\n\n&lt;/html&gt;\r<br />\n<br />\nIt would be great, if anyone could help me with that problem!<br />\n",
    "PostedDate": "2013-11-06T08:24:29.937-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "1120729",
    "ThreadId": "466325",
    "Html": "Already sometime ago I looked into this. But what I remember is that the Environment abstracts the underlying engine that is running the JavaScript (nodejs or  MS script host) If it doesn't recognise the engine, it will be initialised to null.\r<br />\n<br />\nIn your case, I don't think right now the engine you are using (JavaScript on Firefox) is supported by the Language Services. So to get it working, you will have to implement the Environment API using the something like the W3C File API.<br />\n",
    "PostedDate": "2013-11-08T23:01:42.54-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "1122933",
    "ThreadId": "466325",
    "Html": "Thank you for your reply. I don't think that this would solve my problem, because the same problem occurs with Internet Explorer and on different machines with different operating systems, too. I think that my problem resides on a higher level, because every functionality of the TypeScript-Framework I use, is not working. There's always the error &quot;xyz is not defined&quot;.\r<br />\n<br />\nThe weird thing is, that if I copy the code of the TypeScript-Framework into my module, everything works fine. But if I reference the code of the TypeScript-Framework directly from the TypeScript source code (in the regarding .ts-file), the code breaks with an error. Example:\r<br />\n///&lt;reference path='....\\TypeScriptSourceCode\\src\\compiler\\core\\arrayUtilities.ts' /&gt;\r<br />\nmodule ASTAccessorTests {\r<br />\n//code copied from arrayUtilities.ts\r<br />\nexport class ArrayUtilities {<br />\n<pre><code>public static isArray(value: any): boolean {\n    return Object.prototype.toString.apply(value, []) === '[object Array]';\n}</code></pre>\n\n}\r<br />\nalert(ArrayUtilities.isArray(&quot;bla&quot;).toString()); //works \r<br />\nalert(TypeScript.ArrayUtilities.isArray(&quot;blubb&quot;).toString()); //fails\r<br />\n}\r<br />\n<br />\nThe same error occurs for example with\r<br />\n///&lt;reference path='....\\TypeScriptSourceCode\\src\\compiler\\core\\environment.ts' /&gt;\r<br />\n...\r<br />\nvar fileName = &quot;./sut.ts&quot;;\r<br />\nvar contents = Environment.readFile(fileName, /<em>codepage</em>/ null).contents;\r<br />\n<br />\nor\r<br />\n///&lt;reference path='....\\TypeScriptSourceCode\\src\\harness\\harness.ts' /&gt;\r<br />\n...\r<br />\nvar typescriptLS = new Harness.TypeScriptLS();<br />\n",
    "PostedDate": "2013-11-13T07:10:16.043-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]