{
  "WorkItem": {
    "AffectedComponent": {
      "Name": "",
      "DisplayName": ""
    },
    "ClosedComment": "Thanks for reporting this. \n\nClosing since this only affects the unit tests when run in a specific order. We haven't seen reports where the compiler has an issue caused by this.\n\nThe easiest way to run the tests is using jake.\n\njake runtests\n\nor\n\nnode built\\localtests\\run.js --compiler",
    "ClosedDate": "2013-01-30T14:44:40.63-08:00",
    "CommentCount": 4,
    "Custom": null,
    "Description": "I think that one or more compiler's test files (tests/compiler/*.ts files) affect other testcases, and it is not good. Although I investigated which test file has a problem, I couldn't find... So I just report this problem.\r\n\r\nI use Node (v0.8.15) on Linux (Ubuntu 12.04), and I compiled compiler and tests by command \"make tests\". (I wrote Makefile for Linux by myself, which is almost same with one of http://typescript.codeplex.com/workitem/17 .)\r\n\r\nIn case that compiler's tests are run by command \"node built/localtests/run.js tests/compiler/*.ts\", all tests end with success! In this case, an order that a test file is performed is a lexical order of paths, which is:\r\ntests/compiler/assignmentCompat.ts tests/compiler/callSignatureTests.ts tests/compiler/class.ts tests/compiler/classOverloads.ts tests/compiler/compilerBaselines.ts tests/compiler/constructSignatureTests.ts tests/compiler/contextualTyping2.ts tests/compiler/declFileBaselines.ts tests/compiler/declarationTests.ts tests/compiler/functionCalls.ts tests/compiler/functionOverloads.ts tests/compiler/functionSignaturesTests.ts tests/compiler/getsetReturnTypes.ts tests/compiler/identifiers.ts tests/compiler/interface.ts tests/compiler/literals.ts tests/compiler/moduleAlias.ts tests/compiler/plusTyping.ts tests/compiler/propertyAccess.ts tests/compiler/propertySignatureTests.ts tests/compiler/recursiveInferenceBug.ts tests/compiler/samples.ts tests/compiler/scopeTests.ts tests/compiler/sourcemapBaselines.ts tests/compiler/ternaryBestCommonTypes.ts tests/compiler/thisKeyword.ts tests/compiler/widenedTypes.ts\r\n\r\nIn case that compiler's tests are run by command \"node built/localtests/run.js --compiler\", however, three testcases end with FAILURE. In this case, an order that a test file is performed is a NOT LEXICAL ORDER of paths, but following order:\r\ntests/compiler/constructSignatureTests.ts tests/compiler/identifiers.ts tests/compiler/samples.ts tests/compiler/propertyAccess.ts tests/compiler/interface.ts tests/compiler/assignmentCompat.ts tests/compiler/propertySignatureTests.ts tests/compiler/literals.ts tests/compiler/scopeTests.ts tests/compiler/functionCalls.ts tests/compiler/getsetReturnTypes.ts tests/compiler/sourcemapBaselines.ts tests/compiler/functionSignaturesTests.ts tests/compiler/callSignatureTests.ts tests/compiler/plusTyping.ts tests/compiler/declFileBaselines.ts tests/compiler/widenedTypes.ts tests/compiler/recursiveInferenceBug.ts tests/compiler/thisKeyword.ts tests/compiler/declarationTests.ts tests/compiler/compilerBaselines.ts tests/compiler/contextualTyping2.ts tests/compiler/functionOverloads.ts tests/compiler/class.ts tests/compiler/ternaryBestCommonTypes.ts tests/compiler/classOverloads.ts tests/compiler/moduleAlias.ts\r\n\r\nFrom these, I think that one or more compiler's test files affect other testcases, and it is not good. Although I investigated which test file has a problem, I couldn't find... The result of the tests was attached.",
    "LastUpdatedDate": "2013-01-30T14:44:40.63-08:00",
    "PlannedForRelease": "",
    "ReleaseVisibleToPublic": false,
    "Priority": {
      "Name": "Low",
      "Severity": 50,
      "Id": 1
    },
    "ProjectName": "typescript",
    "ReportedDate": "2012-12-01T00:38:19.29-08:00",
    "Status": {
      "Name": "Closed",
      "Id": 4
    },
    "ReasonClosed": {
      "Name": "Unassigned"
    },
    "Summary": "Failed compiler's tests according to the execution sequence of test files",
    "Type": {
      "Name": "Issue",
      "Id": 3
    },
    "VoteCount": 1,
    "Id": 519
  },
  "FileAttachments": [
    {
      "FileId": 557380,
      "FileName": "result_of_run_compiler",
      "DownloadUrl": ".\\557380"
    },
    {
      "FileId": 557564,
      "FileName": "error_report.txt",
      "DownloadUrl": ".\\557564"
    },
    {
      "FileId": 557565,
      "FileName": "baseline-report.failing_tests_on_linux.html",
      "DownloadUrl": ".\\557565"
    },
    {
      "FileId": 557583,
      "FileName": "error_report_on_windows.txt",
      "DownloadUrl": ".\\557583"
    }
  ],
  "Comments": [
    {
      "Message": "Thank you for the very detailed report so far - very helpful. Could you please attach the \"baseline-report.html\" file generated by the failing test run? I'm currently not able to reproduce the issue on Windows, but I'll keep looking until I get it figured out.",
      "PostedDate": "2012-12-01T12:47:05.44-08:00",
      "Id": 83405
    },
    {
      "Message": "Thank you for your reply. I'm sorry, I used older source code (commit c283ca0bbc9db460fc638f58947d2d5b23dc9a06).\r\n\r\nSo I re-run the tests using commit 2bee84410e02c8cb70a551b83ff2854220990b88 (latest master branch). In case that an order that test files are performed is a NOT LEXICAL ORDER, a few tests end with failure as well. (Of course, in case that an order that test files are performed is a LEXICAL ORDER, all tests end with success!)\r\n\r\nThe details of result of failing test run is attached. And I'll attach the \"baseline-report.html\" file generated by the failing test run. Thanks.\r\n\r\n--- failing tests result:\r\nScenarios: 2165 passed, 11 failed.\r\nTestcases: 3597 passed, 7 failed.\r\n  Blocked: 124\r\n\r\n--- environment where run tests:\r\nOS: Linux (Ubuntu 12.04)\r\nJavaScript host: node v0.8.15\r\n\r\n--- used commit:\r\ncommit 2bee84410e02c8cb70a551b83ff2854220990b88\r\n\r\n--- way to run tests:\r\n$ node built/localtests/run.js tests/compiler/constructSignatureTests.ts \\\r\n    tests/compiler/identifiers.ts tests/compiler/samples.ts \\\r\n    tests/compiler/propertyAccess.ts tests/compiler/interface.ts \\\r\n    tests/compiler/assignmentCompat.ts tests/compiler/propertySignatureTests.ts \\\r\n    tests/compiler/literals.ts tests/compiler/scopeTests.ts \\\r\n    tests/compiler/functionCalls.ts tests/compiler/getsetReturnTypes.ts \\\r\n    tests/compiler/sourcemapBaselines.ts tests/compiler/functionSignaturesTests.ts \\\r\n    tests/compiler/callSignatureTests.ts tests/compiler/plusTyping.ts \\\r\n    tests/compiler/declFileBaselines.ts tests/compiler/widenedTypes.ts \\\r\n    tests/compiler/recursiveInferenceBug.ts tests/compiler/thisKeyword.ts \\\r\n    tests/compiler/declarationTests.ts tests/compiler/compilerBaselines.ts \\\r\n    tests/compiler/contextualTyping2.ts tests/compiler/functionOverloads.ts \\\r\n    tests/compiler/class.ts tests/compiler/ternaryBestCommonTypes.ts \\\r\n    tests/compiler/classOverloads.ts tests/compiler/moduleAlias.ts\r\n",
      "PostedDate": "2012-12-02T01:58:08.33-08:00",
      "Id": 83415
    },
    {
      "Message": "I attach the \"baseline-report.html\" file. It named \"baseline-report.failing_tests_on_linux.html\".\r\n\r\n",
      "PostedDate": "2012-12-02T02:02:08.32-08:00",
      "Id": 83416
    },
    {
      "Message": "Also using Node 0.8.15 on Windows 8 Pro, I found a few of the compiler's tests failed in case that an order that test files are performed is a NOT LEXICAL ORDER. (As with tests on Linux, in case that an order that test files are performed is a LEXICAL ORDER, all tests end with success!)\r\n\r\nThe details of result of failing test run is attached. (named \"error_report_on_windows.txt\")\r\n\r\n--- failing tests result:\r\nScenarios: 2165 passed, 11 failed.\r\nTestcases: 3599 passed, 5 failed.\r\n  Blocked: 124\r\n\r\n--- environment where run tests:\r\nOS: Windows 8 Pro\r\nJavaScript host: node v0.8.15\r\n\r\n--- used commit:\r\ncommit 2bee84410e02c8cb70a551b83ff2854220990b88\r\n\r\n--- way to run tests (using Windows PowerShell):\r\nD:\\...\\ts\\typescript [master +1 ~0 -0 !]> node.exe .\\built\\localtest\\run.js tests/compiler/constructSignatureTests.ts tests/compiler/identifiers.ts tests/compiler/samples.ts tests/compiler/propertyAccess.ts tests/compiler/interface.ts tests/compiler/assignmentCompat.ts tests/compiler/propertySignatureTests.ts tests/compiler/literals.ts tests/compiler/scopeTests.ts tests/compiler/functionCalls.ts tests/compiler/getsetReturnTypes.ts tests/compiler/sourcemapBaselines.ts tests/compiler/functionSignaturesTests.ts tests/compiler/callSignatureTests.ts tests/compiler/plusTyping.ts tests/compiler/declFileBaselines.ts tests/compiler/widenedTypes.ts tests/compiler/recursiveInferenceBug.ts tests/compiler/thisKeyword.ts tests/compiler/declarationTests.ts tests/compiler/compilerBaselines.ts tests/compiler/contextualTyping2.ts tests/compiler/functionOverloads.ts tests/compiler/class.ts tests/compiler/ternaryBestCommonTypes.ts tests/compiler/classOverloads.ts tests/compiler/moduleAlias.ts",
      "PostedDate": "2012-12-02T03:34:37.34-08:00",
      "Id": 83417
    }
  ]
}